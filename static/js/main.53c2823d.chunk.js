(this["webpackJsonpreact-shop"]=this["webpackJsonpreact-shop"]||[]).push([[0],{27:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(19),s=n.n(r),i=(n(27),n(11)),o=n(4),l=n(3),u=n.n(l),j=n(6),d=n(2),b="https://stores-tests-api.herokuapp.com",p=n(0);function h(){var e=Object(a.useState)(0),t=Object(d.a)(e,2),n=t[0],c=t[1];Object(a.useEffect)((function(){function e(){return(e=Object(j.a)(u.a.mark((function e(){var t,n,a,r,s,i,o,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("token"),n=localStorage.getItem("email"),t||n){e.next=5;break}return c("0"),e.abrupt("return");case 5:return a={username:n,password:"AnyPassword"},e.next=8,fetch("".concat(b,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 8:return r=e.sent,e.next=11,r.json();case 11:return s=e.sent,i=s.uuid,e.next=15,fetch("".concat(b,"/balance/").concat(i),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(t)}});case 15:if(o=e.sent,console.log(o),404!==o.status){e.next=20;break}return c("0"),e.abrupt("return");case 20:return e.next=22,o.json();case 22:l=e.sent,c(l.balance);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);return Object(p.jsx)("nav",{className:"darken-1",children:Object(p.jsxs)("div",{className:"nav-wrapper",children:[Object(p.jsx)("a",{href:"/react-shop",className:"brand-logo",children:"Products Shop"}),Object(p.jsxs)("ul",{id:"nav-mobile",className:"right hide-on-med-and-down",children:[Object(p.jsx)("li",{children:Object(p.jsx)(i.b,{to:"/user",id:"user-link",children:"User"})}),Object(p.jsx)("li",{children:Object(p.jsxs)(i.b,{to:"/balance",id:"blance-link",children:["Balance is ",n]})}),Object(p.jsx)("li",{children:Object(p.jsx)(i.b,{to:"/register",id:"register-link",children:"Register"})}),Object(p.jsx)("li",{children:Object(p.jsx)(i.b,{to:"/login",id:"login-link",children:"Login"})}),Object(p.jsx)("li",{children:Object(p.jsx)("a",{href:"#!",rel:"noreferrer",onClick:function(){localStorage.removeItem("token"),localStorage.removeItem("email")},id:"user-link",children:"Logout"})})]})]})})}function m(){return Object(p.jsx)("footer",{className:"page-footer lighten-4",children:Object(p.jsx)("div",{className:"footer-copyright",children:Object(p.jsxs)("div",{className:"container",children:["\xa9 ",(new Date).getFullYear()," Copyright Text",Object(p.jsx)("a",{className:"grey-text text-lighten-4 right",href:"https://github.com/berpress",rel:"noreferrer",target:"_blank",children:"Repo"})]})})})}var O=n(22),f=n(7);function x(){return Object(p.jsx)("div",{className:"progress",children:Object(p.jsx)("div",{className:"indeterminate"})})}function g(e){var t=e.description,n=e.image,a=e.price,c=e.itemID,r=e.name,s=e.addToBasket,i=void 0===s?Function.prototype:s;return Object(p.jsxs)("div",{className:"card",children:[Object(p.jsx)("div",{className:"card-image",children:Object(p.jsx)("img",{src:n,alt:r})}),Object(p.jsxs)("div",{className:"card-content",children:[Object(p.jsx)("span",{className:"card-title",children:r}),Object(p.jsx)("p",{children:t})]}),Object(p.jsxs)("div",{className:"card-action",children:[Object(p.jsx)("button",{className:"btn","data-test":"buy",onClick:function(){return i({itemID:c,name:r,price:a})},children:"Buy"}),Object(p.jsxs)("span",{className:"right","data-test":"price",style:{fontSize:"1.8rem"},children:[a," \u20bd"]})]})]})}var v=function(){var e=Object(j.a)(u.a.mark((function e(t,n){var a,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"/store/").concat(t),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(n)}});case 2:return a=e.sent,e.next=5,a.json();case 5:return c=e.sent,r=c.uuid,console.log("store ".concat(t," was add, uuid is ").concat(r)),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(j.a)(u.a.mark((function e(t,n,a,c,r,s){var i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={description:n,price:a,store_id:c,image:r},e.next=3,fetch("".concat(b,"/item/").concat(t),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(s)},body:JSON.stringify(i)});case 3:return o=e.sent,e.next=6,o.json();case 6:console.log("item ".concat(t," was add"));case 7:case"end":return e.stop()}}),e)})));return function(t,n,a,c,r,s){return e.apply(this,arguments)}}();function k(e){var t=e.goods,n=void 0===t?[]:t,a=e.addToBasket,c=void 0===a?Function.prototype:a,r=e.removeFromBasket,s=void 0===r?Function.prototype:r,i=function(){var e=Object(j.a)(u.a.mark((function e(){var t,n,a,c,r,s,i,o,l,j,d,p,h;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(Date.now(),"_admin.com"),"Password11",console.log(t),n={username:t,password:"Password11"},e.next=6,fetch("".concat(b,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 6:return a=e.sent,e.next=9,a.json();case 9:return c=e.sent,r=c.uuid,console.log("Get ".concat(r)),e.next=14,fetch("".concat(b,"/auth"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 14:return s=e.sent,e.next=17,s.json();case 17:return i=e.sent,o=i.access_token,console.log("Get token ".concat(o)),e.next=22,v("vegetables",o);case 22:return l=e.sent,e.next=25,v("fruits",o);case 25:return j=e.sent,e.next=28,v("waters",o);case 28:return d=e.sent,e.next=31,v("sweets",o);case 31:return p=e.sent,e.next=34,v("bakery",o);case 34:return h=e.sent,e.next=37,y("bananas","Delicious Brazilian bananas, 1 kg.",99,j,"https://github.com/berpress/online-grocery-store/blob/main/images_shop/bananes.jpg?raw=true",o);case 37:return e.next=39,y("apples","Delicious red apples, 1 kg.",112,j,"https://github.com/berpress/online-grocery-store/blob/main/images_shop/apples.jpg?raw=true",o);case 39:return e.next=41,y("tomate","Fresh tomatoes, 1 kg.",38,l,"https://github.com/berpress/online-grocery-store/blob/main/images_shop/tomate.jpg?raw=true",o);case 41:return e.next=43,y("potatoes","Russian potatoes, 2 kg.",20,l,"https://github.com/berpress/online-grocery-store/blob/main/images_shop/potatoes.jpg?raw=true",o);case 43:return e.next=45,y("pepsi","Pepsi 1L",38,d,"https://github.com/berpress/online-grocery-store/blob/main/images_shop/Pepsi.jpg?raw=true",o);case 45:return e.next=47,y("juice Orange","Orange juice, 750 ml.",111,d,"https://github.com/berpress/online-grocery-store/blob/main/images_shop/orange.jpg?raw=true",o);case 47:return e.next=49,y("Vanilla ice cream","Vanilla ice cream, 150 gr.",47,p,"https://github.com/berpress/online-grocery-store/blob/main/images_shop/icecream.png?raw=true",o);case 49:return e.next=51,y("Chocolate","Black chocolate, 100 gr.",214,p,"https://github.com/berpress/online-grocery-store/blob/main/images_shop/chocolate.jpg?raw=true",o);case 51:return e.next=53,y("Bread","White bread, 340 gr.",47,h,"https://github.com/berpress/online-grocery-store/blob/main/images_shop/bread.jpg?raw=true",o);case 53:return e.next=55,y("Cake","Cake, 75 gr.",99,h,"https://github.com/berpress/online-grocery-store/blob/main/images_shop/cake.jpeg?raw=true",o);case 55:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n.length?Object(p.jsx)("div",{className:"goods",children:n.map((function(e){return Object(p.jsx)(g,Object(f.a)(Object(f.a)({},e),{},{addToBasket:c,removeFromBasket:s}),e.itemID)}))}):Object(p.jsxs)("div",{children:[Object(p.jsx)("h3",{children:"Nothing here, see github"}),Object(p.jsx)("a",{href:"https://github.com/berpress/flask-restful-api",children:"Rest API"})," and",Object(p.jsx)("a",{href:"https://github.com/berpress/online-grocery-store",children:" Front "}),"or prepare data with API requests:",Object(p.jsx)("button",{onClick:i,children:"Prepere data"})]})}function w(e){var t=e.quantity,n=void 0===t?0:t,a=e.handleBasketShow,c=void 0===a?Function.prototype:a;return Object(p.jsxs)("div",{className:"cart red darken-4 white-text",onClick:c,children:[Object(p.jsx)("i",{className:"material-icons",children:"shopping_cart"}),n?Object(p.jsx)("span",{className:"cart-quantity",children:n}):null]})}function N(e){var t=e.itemID,n=e.name,a=e.price,c=e.quantity,r=e.removeFromBasket,s=void 0===r?Function.prototype:r,i=e.incQuantity,o=void 0===i?Function.prototype:i,l=e.decQuantity,u=void 0===l?Function.prototype:l;return Object(p.jsxs)("li",{className:"collection-item",children:[n," ",Object(p.jsx)("i",{className:"material-icons basket-quantity",onClick:function(){return u(t)},"data-test":"minus",children:"remove"})," ","x",c," ",Object(p.jsx)("i",{className:"material-icons basket-quantity",onClick:function(){return o(t)},"data-test":"plus",children:"add"})," ","= ",a*c," rub.",Object(p.jsx)("span",{className:"secondary-content","data-test":"remove",onClick:function(){return s(t)},children:Object(p.jsx)("i",{className:"material-icons basket-delete",children:"close"})})]})}function S(e){var t=e.name,n=void 0===t?"":t,c=e.closeAlert,r=void 0===c?Function.prototype:c;return Object(a.useEffect)((function(){var e=setTimeout(r,5e3);return function(){clearTimeout(e)}}),[n]),Object(p.jsx)("div",{id:"toast-container",children:Object(p.jsx)("div",{className:"toast",children:n})})}function C(e){var t=e.order,n=void 0===t?[]:t,c=e.handleBasketShow,r=void 0===c?Function.prototype:c,s=e.removeFromBasket,i=void 0===s?Function.prototype:s,o=e.setOrderZero,l=void 0===o?Function.prototype:o,h=e.incQuantity,m=e.decQuantity,O=Object(a.useState)(""),x=Object(d.a)(O,2),g=x[0],v=x[1],y=n.reduce((function(e,t){return e+t.price*t.quantity}),0),k=function(){var e=Object(j.a)(u.a.mark((function e(){var t,a,c,r,s,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("token"),a=localStorage.getItem("email"),t){e.next=5;break}return v("Auth first!"),e.abrupt("return");case 5:return c={username:a,password:"AnyPassword"},e.next=8,fetch("".concat(b,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});case 8:return r=e.sent,e.next=11,r.json();case 11:return s=e.sent,i=s.uuid,e.next=15,Promise.all(n.map(function(){var e=Object(j.a)(u.a.mark((function e(n){var a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={itemId:n.itemID},e.next=3,fetch("".concat(b,"/pay/").concat(i),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(t)},body:JSON.stringify(a)});case 3:return 200===(c=e.sent).status?v("Product ".concat(n.name," buy sucess!")):200!==c.status&&v("Erorr!"),l(),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 15:o=e.sent,console.log(o);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("ui",{className:"collection basket-list",children:[Object(p.jsx)("li",{className:"collection-item active",children:"Cart"}),n.length?n.map((function(e){return Object(p.jsx)(N,Object(f.a)(Object(f.a)({incQuantity:h,decQuantity:m},e),{},{removeFromBasket:i}),e.itemID)})):Object(p.jsx)("li",{className:"collection-item","data-test":"cart-empty",children:"Cart is Empty"}),Object(p.jsxs)("li",{className:"collection-item active","data-test":"total-price",children:["Total price: ",y," \u20bd "]}),Object(p.jsx)("i",{className:"material-icons basket-close",onClick:r,children:"close"}),Object(p.jsx)("li",{className:"collection-item",children:Object(p.jsx)("button",{className:"btn red btn-small","data-test":"buy-btn",onClick:k,children:"Buy"})}),g&&Object(p.jsx)(S,{name:g,closeAlert:function(){v("")}})]})}function T(e){var t=e.updateGoods,n=void 0===t?Function.prototype:t,c=Object(a.useState)(""),r=Object(d.a)(c,2),s=r[0],i=r[1];return Object(p.jsxs)("div",{className:"input-field",children:[Object(p.jsx)("input",{placeholder:"Search product",id:"email_inline",type:"search",className:"validate",value:s,onChange:function(e){return i(e.target.value)}}),Object(p.jsx)("button",{className:"btn search-btn",onClick:function(){return n(s)},children:"Search"})]})}function _(e){var t=e.name,n=void 0===t?"":t,c=e.closeAlert,r=void 0===c?Function.prototype:c;return Object(a.useEffect)((function(){var e=setTimeout(r,5e3);return function(){clearTimeout(e)}}),[n]),Object(p.jsx)("div",{id:"toast-container",children:Object(p.jsxs)("div",{className:"toast",children:[n," add to cart"]})})}function I(e){var t=e.closeAlert,n=void 0===t?Function.prototype:t;return Object(a.useEffect)((function(){var e=setTimeout(n,7e3);return function(){clearTimeout(e)}}),[name]),Object(p.jsx)("div",{id:"toast-container",children:Object(p.jsx)("div",{className:"toast",children:"Pay done!"})})}function P(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!0),s=Object(d.a)(r,2),i=s[0],o=s[1],l=Object(a.useState)([]),u=Object(d.a)(l,2),j=u[0],h=u[1],m=Object(a.useState)(!1),g=Object(d.a)(m,2),v=g[0],y=g[1],N=Object(a.useState)(""),S=Object(d.a)(N,2),P=S[0],A=S[1],F=Object(a.useState)(""),B=Object(d.a)(F,2),J=B[0],q=B[1];Object(a.useEffect)((function(){fetch("".concat(b,"/items"),{}).then((function(e){return e.json()})).then((function(e){e&&c(e.items),o(!1)}))}),[]);var D=function(){y(!v)};return Object(p.jsxs)("main",{className:"container content",children:[Object(p.jsx)(T,{goods:n,updateGoods:function(e){var t=n.filter((function(t){return e===t.name}));c(t)}}),Object(p.jsx)(w,{quantity:j.length,handleBasketShow:D}),i?Object(p.jsx)(x,{}):Object(p.jsx)(k,{goods:n,addToBasket:function(e){console.log(j);var t=j.findIndex((function(t){return t.itemID===e.itemID}));if(t<0){var n=Object(f.a)(Object(f.a)({},e),{},{quantity:1});h([].concat(Object(O.a)(j),[n]))}else{var a=j.map((function(e,n){return n===t?Object(f.a)(Object(f.a)({},e),{},{quantity:e.quantity+1}):e}));h(a)}A(e.name)}}),v&&Object(p.jsx)(C,{order:j,handleBasketShow:D,removeFromBasket:function(e){var t=j.filter((function(t){return t.itemID!==e}));h(t)},incQuantity:function(e){var t=j.map((function(t){if(t.itemID===e){var n=t.quantity+1;return Object(f.a)(Object(f.a)({},t),{},{quantity:n})}return t}));h(t)},decQuantity:function(e){var t=j.map((function(t){if(t.itemID===e){var n=t.quantity-1;return Object(f.a)(Object(f.a)({},t),{},{quantity:n>=0?n:0})}return t}));h(t)},setOrderZero:function(){h([]),q("buy")}}),P&&Object(p.jsx)(_,{name:P,closeAlert:function(){A("")}}),J&&Object(p.jsx)(I,{closeAlert:function(e){q(e)},name:J})]})}function A(){return Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("form",{className:"col s12",children:Object(p.jsxs)("div",{className:"row",children:[Object(p.jsxs)("div",{className:"input-field col s6",children:[Object(p.jsx)("i",{className:"material-icons prefix",children:"account_circle"}),Object(p.jsx)("input",{id:"icon_prefix",type:"text",className:"validate"}),Object(p.jsx)("label",{for:"icon_prefix"})]}),Object(p.jsxs)("div",{className:"input-field col s6",children:[Object(p.jsx)("i",{className:"material-icons prefix",children:"phone"}),Object(p.jsx)("input",{id:"icon_telephone",type:"tel",className:"validate"}),Object(p.jsx)("label",{for:"icon_telephone"})]})]})})})}function F(e){var t=e.name,n=void 0===t?"":t;return Object(p.jsx)("div",{class:"card-panel red lighten-2",children:n})}function B(){var e=Object(a.useState)(""),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(d.a)(r,2),i=s[0],o=s[1],l=Object(a.useState)(""),h=Object(d.a)(l,2),m=h[0],O=h[1],f=Object(a.useState)(""),x=Object(d.a)(f,2),g=x[0],v=x[1],y=Object(a.useState)(""),k=Object(d.a)(y,2),w=k[0],N=k[1],C=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},T=function(){var e=Object(j.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(C(n)),C(n)){e.next=4;break}return N("Error, ".concat(n," is not email address!")),e.abrupt("return");case 4:if(i===m){e.next=7;break}return N("Error, passwords do not match!"),e.abrupt("return");case 7:if(!(i.length<7)){e.next=10;break}return N("Password must be longer than 7 characters"),e.abrupt("return");case 10:return t={username:n,password:i},e.next=13,fetch("".concat(b,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 13:return a=e.sent,e.next=16,a;case 16:201===a.status?(o(""),c(""),O(""),v("Success")):(o(""),c(""),O(""),v("Erorr, check network!"));case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{class:"row",children:[Object(p.jsx)("img",{className:"image-login",src:"https://cdn3.iconfinder.com/data/icons/business-insurance-8/64/business_insurance-10-512.png",alt:"user"}),Object(p.jsx)("h4",{children:"Register new user"}),Object(p.jsxs)("div",{class:"input-field col s6",children:[Object(p.jsx)("input",{value:n,onChange:function(e){return c(e.target.value)},id:"name",type:"text",class:"validate"}),Object(p.jsx)("label",{class:"active",for:"first_name2",children:"Email"})]}),Object(p.jsxs)("div",{class:"input-field col s6",children:[Object(p.jsx)("input",{value:i,onChange:function(e){return o(e.target.value)},id:"password1",type:"password",class:"validate"}),Object(p.jsx)("label",{class:"active",for:"first_name2",children:"Password"})]}),Object(p.jsxs)("div",{class:"input-field col s6",children:[Object(p.jsx)("input",{value:m,onChange:function(e){return O(e.target.value)},id:"password2",type:"password",class:"validate"}),Object(p.jsx)("label",{class:"active",for:"first_name2",children:"Repeat password"})]}),g&&Object(p.jsx)(S,{name:g,closeAlert:function(){v("")}}),Object(p.jsx)("button",{class:"waves-effect waves-light btn",id:"register",onClick:T,children:"Register"}),w&&Object(p.jsx)(F,{id:"error",name:w})]})}function J(){var e=Object(a.useState)(""),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(d.a)(r,2),i=s[0],o=s[1],l=Object(a.useState)(""),h=Object(d.a)(l,2),m=h[0],O=h[1],f=function(){var e=Object(j.a)(u.a.mark((function e(){var t,a,r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("token")){e.next=6;break}return o(""),c(""),O("You already login, please click logout!"),e.abrupt("return");case 6:return t={username:n,password:i},e.next=9,fetch("".concat(b,"/auth"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 9:return a=e.sent,e.next=12,a;case 12:if(r=e.sent,200!==a.status){e.next=24;break}return e.next=16,r.json();case 16:s=e.sent,localStorage.setItem("token",s.access_token),localStorage.setItem("email",n),o(""),c(""),O("Success"),e.next=27;break;case 24:o(""),c(""),O("Invalid credentials");case 27:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{class:"row",children:[Object(p.jsx)("img",{className:"image-login",src:"https://cdn3.iconfinder.com/data/icons/business-insurance-8/64/business_insurance-10-512.png",alt:"user"}),Object(p.jsx)("h4",{children:"Sign in"}),Object(p.jsxs)("div",{class:"input-field col s6",children:[Object(p.jsx)("input",{value:n,onChange:function(e){return c(e.target.value)},id:"name",type:"text",class:"validate"}),Object(p.jsx)("label",{class:"active",for:"first_name2",children:"Email"})]}),Object(p.jsxs)("div",{class:"input-field col s6",children:[Object(p.jsx)("input",{value:i,onChange:function(e){return o(e.target.value)},id:"password",type:"password",class:"validate"}),Object(p.jsx)("label",{class:"active",for:"first_name2",children:"Password"})]}),Object(p.jsx)("button",{class:"waves-effect waves-light btn",id:"register",onClick:f,children:"Start"}),m&&Object(p.jsx)(S,{name:m,closeAlert:function(){O("")}})]})}function q(){var e=Object(a.useState)(""),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(d.a)(r,2),i=s[0],o=s[1],l=Object(a.useState)(""),h=Object(d.a)(l,2),m=h[0],O=h[1],f=Object(a.useState)(""),x=Object(d.a)(f,2),g=x[0],v=x[1],y=Object(a.useState)(!1),k=Object(d.a)(y,2),w=k[0],N=k[1],C=Object(a.useState)(""),T=Object(d.a)(C,2),_=T[0],I=T[1],P=Object(a.useState)(""),A=Object(d.a)(P,2),B=A[0],J=A[1],q=function(){var e=Object(j.a)(u.a.mark((function e(){var t,n,a,c,r,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),n=localStorage.getItem("email"),a={username:n,password:"AnyPassword"},e.next=5,fetch("".concat(b,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 5:return c=e.sent,e.next=8,c.json();case 8:return r=e.sent,s=r.uuid,i={balance:g},e.next=13,fetch("".concat(b,"/balance/").concat(s),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(t)},body:JSON.stringify(i)});case 13:201===e.sent.status?J("All good, you added ".concat(g," RUB to your account")):J("Erorr! Please check network!"),o(""),O(""),v(""),N(!1);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==n){e.next=6;break}return I("Check user name and last name! It must be not empty!"),e.abrupt("return");case 6:if(""!==i&&16===i.length){e.next=11;break}return I("Check card number! It must be 16 symbols and not empty!"),e.abrupt("return");case 11:if(""!==m){e.next=16;break}return I("Check card date! It must be not empty!"),e.abrupt("return");case 16:if(""!==g){e.next=21;break}return I("Check money! It must be not empty!"),e.abrupt("return");case 21:if(w){e.next=26;break}return I("Read agree and click checkbox!"),e.abrupt("return");case 26:I("");case 27:return e.next=29,q();case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("img",{className:"image-card",src:"https://www.masculist.ru/upload/blogs/95d4dfdcb3bde5338cfaf2131ff89a19.jpeg",alt:"card"}),Object(p.jsxs)("form",{className:"col s12",children:[Object(p.jsxs)("div",{className:"row",children:[Object(p.jsxs)("div",{className:"input-field col s6",children:[Object(p.jsx)("i",{className:"material-icons prefix",children:"account_circle"}),Object(p.jsx)("input",{id:"icon_prefix",type:"text",className:"validate",value:n,onChange:function(e){return c(e.target.value)}}),Object(p.jsx)("label",{for:"icon_prefix"})]}),Object(p.jsxs)("div",{className:"input-field col s6",children:[Object(p.jsx)("i",{className:"material-icons prefix",children:"credit_card"}),Object(p.jsx)("input",{id:"icon_telephone",type:"tel",className:"validate",value:i,onChange:function(e){return o(e.target.value)}}),Object(p.jsx)("label",{for:"icon_telephone"})]}),Object(p.jsxs)("div",{className:"input-field col s6",children:[Object(p.jsx)("i",{className:"material-icons prefix",children:"date_range"}),Object(p.jsx)("input",{id:"icon_telephone",type:"tel",className:"validate",value:m,onChange:function(e){return O(e.target.value)}}),Object(p.jsx)("label",{for:"icon_telephone"})]}),Object(p.jsxs)("div",{className:"input-field col s6",children:[Object(p.jsx)("i",{className:"material-icons prefix",children:"attach_money"}),Object(p.jsx)("input",{id:"icon_telephone",type:"tel",className:"validate",value:g,onChange:function(e){return v(e.target.value)}}),Object(p.jsx)("label",{for:"icon_telephone"})]}),Object(p.jsx)("p",{children:Object(p.jsxs)("label",{id:"agree",children:[Object(p.jsx)("input",{type:"checkbox",value:w,onChange:function(e){return N(!w)}}),Object(p.jsx)("span",{children:"Agree to the rules"})]})}),Object(p.jsx)("button",{class:"waves-effect waves-light btn",onClick:D,children:"Transfer"})]}),_&&Object(p.jsx)(F,{name:_}),B&&Object(p.jsx)(S,{name:B,closeAlert:function(){J("")}})]})]})}function D(e){var t=Object(a.useState)(""),n=Object(d.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(""),i=Object(d.a)(s,2),o=i[0],l=i[1],h=Object(a.useState)(""),m=Object(d.a)(h,2),O=m[0],f=m[1],x=Object(a.useState)(""),g=Object(d.a)(x,2),v=g[0],y=g[1],k=Object(a.useState)(""),w=Object(d.a)(k,2),N=w[0],S=w[1];return Object(a.useEffect)((function(){function e(){return(e=Object(j.a)(u.a.mark((function e(){var t,n,a,c,s,i,o,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("token"),n=localStorage.getItem("email"),t||n){e.next=9;break}return r("-"),l("-"),f("-"),y("-"),S("-"),e.abrupt("return");case 9:return a={username:n,password:"AnyPassword"},e.next=12,fetch("".concat(b,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 12:return c=e.sent,e.next=15,c.json();case 15:return s=e.sent,i=s.uuid,e.next=19,fetch("".concat(b,"/user_info/").concat(i),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(t)}});case 19:if(404!==(o=e.sent).status){e.next=27;break}return r("-"),l("-"),f("-"),y("-"),S("-"),e.abrupt("return");case 27:return e.next=29,o.json();case 29:j=e.sent,r(j.email),l(j.phone),f(j.address.street),y(j.address.city),S(j.address.home_number);case 35:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(p.jsx)("div",{className:"input-field",children:Object(p.jsxs)("form",{action:"/my-handling-form-page",children:[Object(p.jsx)("img",{className:"image-login",src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRGolVLdujSf7YevnT5bU0Lki0A-MuMSofgZVnCMmDK70VxObf_p7LMqI_F6QvQesLxOr4&usqp=CAU",alt:"user"}),Object(p.jsxs)("p",{id:"email",children:["User email: ",c]}),Object(p.jsxs)("p",{id:"city",children:["City: ",v]}),Object(p.jsxs)("p",{id:"street",children:["Street: ",O]}),Object(p.jsxs)("p",{id:"number_home",children:["Home number: ",N]}),Object(p.jsxs)("p",{id:"phone",children:["Phone: ",o]}),Object(p.jsx)("h4",{children:"This page show user info. For add data, use api."})]})})}function E(){return Object(p.jsx)(D,{})}var z=function(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(i.a,{basename:"/react-shop",children:Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(h,{}),Object(p.jsx)("main",{className:"container content",children:Object(p.jsxs)(o.c,{children:[Object(p.jsx)(o.a,{exact:!0,path:"/",children:Object(p.jsx)(P,{})}),Object(p.jsx)(o.a,{path:"/about",component:A}),Object(p.jsx)(o.a,{path:"/register",component:B}),Object(p.jsx)(o.a,{path:"/login",component:J}),Object(p.jsx)(o.a,{path:"/balance",component:q}),Object(p.jsx)(o.a,{path:"/user",component:E}),Object(p.jsx)(o.a,{path:"/register",component:B})]})}),Object(p.jsx)(m,{})]})})})};s.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(z,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.53c2823d.chunk.js.map